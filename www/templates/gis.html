<ion-view view-title="{{user.user_type === 'CUSTOMER' ? 'MAKE ORDER' : 'RECEIVE ORDER'}}" >
    <div class="bar bar-subheader bar-default" ng-if="user.user_type === 'CUSTOMER'">
        <div class="col-11">
            <input type="text" g-places-autocomplete ng-model="destination"
            placeholder="Select Drop off Location"/>
        </div>
        <div class="col-1">
            <!-- ng-click="refresh()" -->
            <button class="button button-balanced btn-rnd pull-right btn-sm"
            ng-click="refresh()">
                <i class="icon ion-refresh"></i>
            </button>
        </div>
      </div>
    <ion-content ng-class="{'has-subheader': user.user_type === 'CUSTOMER'}">
        <div class="col-12">
            <div style="width: 100%;margin-top:0;"></div>
            <div map-lazy-load="https://maps.google.com/maps/api/js"
			  	map-lazy-load-params="{{googleMapsUrl}}" 
                ng-if="couriers.length > 0 && user.user_type === 'CUSTOMER'">
                <!-- Retunr if zooming doesn't work -->
                <!-- zoom="17" -->
                <ng-map style="height: 85vh;" zoom-to-include-markers="auto"
                geo-callback="callbackFunc('you')" zoom="17">
                    <marker position="current" animation="DROP" centered="true">
                    </marker>
                    <marker position="{{latlng}}" animation="DROP" centered="true"
                    draggable="false" ng-if="latlng">
                    </marker>
                    <marker ng-repeat="courier in couriers" position="{{courier.point}}"
                    animation="DROP"
                    icon="{ url:'img/destination.png', scaledSize:[30,32], origin: [0,0] }">
                    </marker>
                    <directions
                      polyline-options='{strokeColor: "red"}'
                      draggable="true"
                      waypoints="{{way_points}}"
                      suppress-markers="false"
                      origin="{{center}}"
                      destination="{{latlng}}"
                      >
                    </directions>
                </ng-map>
            </div>
            <div map-lazy-load="https://maps.google.com/maps/api/js"
                map-lazy-load-params="{{googleMapsUrl}}" 
                ng-if="couriers.length === 0 || user.user_type === 'COURIER'">
                <!-- Retunr if zooming doesn't work -->
                <!-- zoom="17" -->
                <ng-map style="height: 85vh;" 
                geo-callback="callbackFunc('you')" zoom="17">
                    <marker position="current" animation="DROP" centered="true"
                    ng-if="user.user_type === 'CUSTOMER'">
                    </marker>
                    <marker position="current" animation="DROP" centered="true"
                    ng-if="user.user_type === 'COURIER'"
                    icon="{ url:'img/destination.png', scaledSize:[30,32], origin: [0,0] }">
                    </marker>
                    <marker position="{{latlng}}" animation="DROP" centered="true"
                    draggable="false" ng-if="latlng">
                    </marker>
                    <marker ng-repeat="courier in couriers" position="{{courier.point}}"
                    animation="DROP"
                    icon="{ url:'img/destination.png', scaledSize:[30,32], origin: [0,0] }">
                    </marker>
                    <directions
                      polyline-options='{strokeColor: "red"}'
                      draggable="true"
                      waypoints="{{way_points}}"
                      suppress-markers="false"
                      origin="{{center}}"
                      destination="{{latlng}}"
                      >
                    </directions>
                </ng-map>
            </div>
        </div>
    </ion-content>
    <div class="col-12 pad-h-20 gisbtn-cont" ng-if="way_points">
        <button class="button-primary button button-block" ng-click="openPopover($event)">
            Request Courier
        </button>
    </div>
</ion-view>
